{% load static %}
{% include 'base.html' %}



<style>
    div.scroll {
        margin: 4px, 4px;
        padding: 4px;
        width: 300px;
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
    }

    div.scrollmenu {
        overflow: auto;
        white-space: nowrap;
    }
</style>

{% block content %}


{% if not results %}
<h1> Search </h1>

<form method='post' action="search_results">
    {% csrf_token %}
    <br>
    <div>
        Search: {{ form.song_name }}
    </div>
    <br>

    <button class="btn btn-primary btn-lg" type="submit">Submit</button>

</form>

{% else %}

<!-- First create Songs scrollbar. -->
<h3>Songs:</h3>
{% if songs %}
<div class="scrollmenu">
    <table>
        <tr>
            {% for song in songs %}
            <!-- Loop through each of our song dictionaries.
            You can see all the fields acessible in the track_info dicionary
            in search_results in views.py.-->
            <td>
                <img src="{{song.album_cover}}">
                <div>
                    <a href="{% url 'songinfo' song.id%}">Song: {{song.name}}</a>
                    <br>
                    <a href="{% url 'album_info' song.album_id%}">Album: {{song.album_name}}</a>
                </div>
                Artist(s): {{song.artists}}
            </td>
            {% endfor %}
        </tr>
    </table>
</div>
{% else %}
<h5>No song results were found.</h5>

{% endif %}

<!-- Next create Albums scrollbar. -->

<h3>Albums:</h3>
{% if albums %}
<div class="scrollmenu">
    <table>
        <tr>
            {% for album in albums %}
            <!-- Loop through each of our album dictionaries.
            You can see all the fields acessible in the album_info dicionary
            in search_results in views.py.-->
            <td>
                <img src="{{album.cover}}">
                <div>
                    <a href="{% url 'album_info' album.id %}">Album: {{album.name}}</a>
                    <br>
                    Artist(s): {{album.artists}}
                    <br>
                    Release date: {{album.release_date}}
                </div>
            </td>
            {% endfor %}
        </tr>
    </table>
</div>
{% else %}
<h5>No albums results were found.</h5>

{% endif %}

<!-- Now create Users results. -->
<h3>Users:</h3>
{% if users %}
<div class="scrollmenu">
    <table>
        <tr>
            {% for user in users %}
            <!-- Loop through each of our album dictionaries.
            You can see all the fields acessible in the album_info dicionary
            in search_results in views.py.-->
            <td>
                <div>
                    {{ user.id }} | <a href="{% url 'show_user' user.id %}">{{ user }}</a>
                    <br>
                    {% load friendshiptags %}
                    Friends: {% friends user %}
                </div>
            </td>
            {% endfor %}
        </tr>
    </table>
</div>
{% else %}
<h5>No users :(</h5>
{% endif %}

<!-- Lastly show playlist serach results. -->
<h3>Playlists:</h3>
{% if playlists %}
<div class="scrollmenu">
    <table>
        <tr>
            {% for playlist in playlists %}
            <!-- Loop through each of our album dictionaries.
            You can see all the fields acessible in the album_info dicionary
            in search_results in views.py.-->
            <td>
                <div>
                    id: {{playlist.id}}
                    <br>
                    <a href="{% url 'addsongs_view' playlist.id %}">Playlist name: {{ playlist.name }}</a>
                    <br>
                    <a href="{% url 'show_user' playlist.user_id.id %}">User: {{playlist.user_id.username}}</a>
                </div>
            </td>
            {% endfor %}
        </tr>
    </table>
</div>
{% else %}
<h5>No playlists found :(</h5>
{% endif %}

{% endif %}

{% endblock %}


<script type="text/javascript">
    if ("{{ user.userExt.dark_mode }}" == "True") {
        document.write('<link rel="stylesheet" type="text/css" href="{% static 'css/dark_mode.css' %}">');
    }
</script>
{% extends 'base.html' %}

{% block title %} dash {% endblock %}

{% block content %}

<script type="text/javascript">

 var thing = 1;

  function ajaxCall(song_id) {
    $.ajax({

        // Our sample url to make request
        url: '{ url proccess_vote}',

        // Type of Request
        type: "GET",

        // Function to call when to
        // request is ok
        success: function(data) {
            var x = JSON.stringify(data);
            console.log(x);
            return x
        },

        // Error handling
        error: function (error) {
            console.log(`Error ${error}`);
        }
    });
  }

</script>


{% for item in recommendations %}
<div class="card" style="width: 40rem;">
  <div class="card-body">
    <iframe style="border-radius:12px" src="https://open.spotify.com/embed/track/{{item.song.id}}?utm_source=generator" width="100%" height="80"
     frameBorder="0" allowfullscreen=""
     allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
    </iframe>
    <p id="{{item.song.id}}-rating">
    <p/>
    <button class="btn btn-primary">Upvote</button>
    <button class="btn btn-primary">Downvote</button>
    <a href="#" class="btn btn-primary">Comments</a>

    <script type="text/javascript">

     var ratings = {{item.ratings}};
     document.getElementById("{{item.song.id}}-rating").innerHTML = ratings.toString();

    </script>
  </div>
</div>

{% endfor %}

{% endblock %}
